# データ入出力（Data I/O）

本ドキュメントは、Opinio ATS における  
**機能定義：データ入出力（Data Import / Export）** を扱う。

## 機能の位置づけ
データ入出力は、  
Opinio ATS に蓄積された情報、または外部から受け取った情報を  
**安全・限定的・説明可能な形で出し入れするための補助機能**である。

本機能は、
- データ活用を容易にする
- 一時的・例外的な業務対応を支える

ためのものであり、  
**日常業務の主導線や判断ロジックを担うものではない**。

---

## 基本思想（最重要）
- 正（Single Source of Truth）は常に ATS 内部にある
- 入出力は「複製・受け渡し」であり、主導権の移譲ではない
- 誰が・いつ・何を入出力したかを必ず説明可能にする
- 大量操作・不可逆操作は抑制する

---

## データインポート（Import）

### 想定用途
- 過去 ATS / 管理表からの初期データ移行
- 媒体・エージェントからの一括データ取り込み
- 一時的な手動補完（例：CSV 受領）

---

### 対象データ（初期想定）
- Candidate（候補者）
- Job（求人）
- Application（応募）
- InterviewSchedule（面接予定）

※ 評価・判断系データは原則インポート対象外  
※ 必要な場合は個別検討とする

---

### インポート方針
- CSV 形式を基本とする
- 事前にフォーマットを固定・公開する
- プレビュー → 確定の二段階操作とする
- 既存データとの **自動マージは行わない**

---

### 取り込みルール
- 必須項目欠損はエラーとして扱う
- 重複候補は「検出のみ」行い、統合判断は人が行う
- 取り込み結果は必ずログとして保持する

---

## データエクスポート（Export）

### 想定用途
- 社内共有用の状況資料作成
- 外部分析ツールでの参照
- 監査・説明責任への対応

---

### 対象データ（初期想定）
- Candidate / Application 一覧
- 選考ステータス・履歴
- 面接予定・実績
- チャネル別集計結果

※ 評価コメント・メモは権限に応じて制御  
※ 個人情報は常に最小限とする

---

### エクスポート形式
- CSV（基本）
- PDF（参照専用レポート）
- 将来：API 連携（読み取り専用）

---

### エクスポート制御
- 権限による操作制限
- 出力項目の固定化
- 大量出力・頻回出力の制限

---

## セキュリティ・監査方針
- 入出力操作はすべて監査対象
- 実行ユーザー・日時・対象を必ず記録
- エクスポートデータの再配布・再利用は管理外とする（注意喚起）

---

## データモデル（必須）

### DataImportJob
- import_job_id
- company_id
- target_type（candidate / job / application 等）
- file_name
- status（pending / preview / completed / failed）
- executed_by
- executed_at

---

### DataImportResult
- result_id
- import_job_id
- row_number
- status（success / error）
- message
- created_at

---

### DataExportJob
- export_job_id
- company_id
- target_type
- format（csv / pdf）
- executed_by
- executed_at

---

## この機能でやること
- データの安全な受け渡し
- 一時的・例外的な業務対応の補助
- 説明可能なログの保持

---

## この機能でやらないこと
- データ編集を伴う大量更新
- 自動マージ・自動上書き
- 日常業務の主導線化
- 評価・判断ロジックの外部委譲

---

## 他機能との関係
- 応募取り込み  
  → Import の一部は入口補助として利用
- 分析・レポート  
  → Export 結果の参照元
- 設定・チーム管理  
  → 操作権限・実行主体の制御
- セキュリティ・監査  
  → 入出力ログの管理

---

## 一文定義（迷ったとき用）
データ入出力は、  
**採用業務の正を保ったまま、必要な範囲だけデータを受け渡すための機能である。**
