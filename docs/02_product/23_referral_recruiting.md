# リファラル採用（Referral Recruiting）

本ドキュメントは、Opinio ATS における  
**機能定義：リファラル採用** を扱う。

---

## 機能の位置づけ
リファラル採用は、  
Opinio ATS において **社員・関係者からの紹介を、通常応募と同じ責務構造で安全に取り込むための機能**である。

「増やせる」とかをいれない。
あくまでチャネルの1つにとどめる。「把握する」のみにとどめ、これを推奨しない。
名前も「備考」ぐらいの感じで、補助的に入れ、紹介者の退職後も残していいレベルに止める。
これがないと自主応募と混同されてしまい、じつはただしい把握ができなくなるため。

本機能は、
- 採用数を増やすための施策管理
- インセンティブ制度の管理

を目的とするものではない。

あくまで、
**「誰から・どの経路で・どのように紹介されたか」を歪めずに記録し、通常の採用プロセスへ接続する**
ことを目的とする。

---

## 基本思想（重要）
- リファラルも「応募の一種」として扱う
- 評価・優遇・採否判断は一切行わない
- 紹介者の影響力を暗黙に反映させない（あえて”口利き”ができない設計）
- 通常応募と同じドメインルールに従わせる

---

## 主な利用シーン
- 社員からの候補者紹介
- OB / OG からの紹介
- 業務委託・外部関係者からの推薦
- イベント・コミュニティ経由の紹介

---

## 構成要素

### 1. リファラル採用ページ
- 会社ごとに発行される専用ページ
- ログイン不要で紹介可能
- 入力項目は最小限（氏名・連絡先・紹介文など）
- 添付資料（任意）

---

### 2. 紹介者情報の扱い
- 紹介者は **候補者とは別エンティティ** として扱う
- 紹介者の属性は評価・判断に利用しない
- 紹介者への自動通知は設定制御可能

---

### 3. 応募への接続
- 取り込み後は 応募チャネルドメイン に渡す
- 生データ（raw）を保持したまま Draft を生成
- 確定後は通常の Candidate / Application として扱う

---

## データモデル（必須）

### ReferralIntake
- referral_intake_id
- company_id
- referrer_type  
  （employee / alumni / external）
- referrer_name
- referrer_contact
- candidate_name
- candidate_contact
- referral_message
- raw_payload
- received_at
- status

---

### ReferralLink
- referral_link_id
- company_id
- token
- expires_at
- created_by
- created_at

---

## フロー（概要）
1. 紹介者がリファラルページから入力
2. ReferralIntake として raw 保存
3. 応募チャネルとして分類（referral）
4. Draft 作成
5. 人による確認・整理
6. Candidate / Application へ昇格

---

## 設計上のルール
- リファラル経由であることは **履歴として保持** する
- 採用判断時に UI 上で強調しない
- 紹介者へのフィードバックは任意設定
- インセンティブ管理は行わない

---

## コントローラ設計

### ReferralController
- create  
  リファラル入力受付
- thankYou  
  送信完了表示

---

### ReferralAdminController
- index  
  紹介一覧
- review  
  内容確認
- promote  
  応募へ昇格

---

## Service

### ReferralIntakeService
- 入力検証
- raw 保存
- Draft 生成

---

## 権限・制御
- リファラルページは公開 URL
- 管理画面は権限者のみ閲覧可
- 紹介者個人情報の閲覧範囲は最小化

---

## 監査・ログ
- すべての紹介はログ対象
- 昇格・却下の履歴を保持
- raw_payload は削除不可

---

## 他機能との関係
- 応募チャネル：  
  referral として取り込み
- 候補者管理：  
  昇格後に Candidate 生成
- ダッシュボード：  
  チャネル別集計対象
- メッセージング：  
  必要に応じた通知送信

---

## 本機能で「やらないこと」
- インセンティブ計算
- 紹介者評価
- 採用確率の自動調整
- 紹介優遇ロジック

---

## 一文定義（迷ったとき用）
リファラル採用は、  
**紹介という入口を歪めず、通常の採用プロセスへ接続するための機能である。**
