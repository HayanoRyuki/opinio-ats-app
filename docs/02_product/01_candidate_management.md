# 候補者管理

本ドキュメントは、Opinio ATS における **機能定義 2-1：候補者管理** を扱う。

## 機能の位置づけ
候補者管理は、Opinio ATS における中核機能であり、応募前後を問わず「候補者」という単位で情報を集約・参照するための基盤である。

Opinio ATS では、「求人に応募した人」を管理するのではなく、**採用判断の対象となりうる人物を、時間軸を超えて扱う**ことを重視する。

そのため、候補者は必ずしも求人や応募に紐づいている必要はなく、スカウト反応・エージェント推薦・過去応募などを含めて、一貫した人物単位で管理される。

---

## 扱う情報
- 候補者基本情報  
  - candidate_id（ATS内ID）  
  - person_id（Opinio共通人物ID）  
  - 表示用氏名  
  - 連絡先（メール・電話）
- 職歴・スキル・志向に関するメモ
- 応募履歴（複数求人への応募を許容）
- 過去の選考・面談履歴
- 採用判断に関する所感・理由の履歴（参照用）

---

## 設計上の前提
以下は、上記「扱う情報」をどのように扱うかに関する前提である。

- 候補者は求人に紐づく前から存在しうる
- 1人の候補者が複数求人に応募することを前提とする
- person_id を軸に、応募・選考・判断履歴を横断的に統合する
- 他アプリ（Career / Interview）との連携を前提とし、候補者データは ATS 内に閉じない

---

## 参照と編集の考え方
- 応募時点の原データは原則保持（immutable）
- 編集・追記は上書きせず、履歴として残す
- 削除は行わず、「無効化」「非表示」を基本とする
- 判断の経緯が追えることを最優先とする

---

## データモデル（必須）

### Candidate
- candidate_id
- person_id
- company_id
- display_name
- email
- phone
- status
- created_at

### CandidateNote
- candidate_note_id
- candidate_id
- note_type（職歴メモ / 志向メモ など）
- body
- created_by
- created_at

---

## コントローラ設計

### CandidateController
- index  
  候補者一覧表示（検索・絞り込み）
- show  
  候補者詳細表示
- create  
  候補者手動登録画面
- store  
  候補者登録
- update  
  基本情報の更新（追記前提）

---

## ビュー設計
- candidates/index  
  候補者一覧画面
- candidates/show  
  候補者詳細（プロフィール・応募・履歴）
- candidates/form  
  新規登録・編集フォーム

---

## Controller / View 以外に必要な要素

### FormRequest
- CandidateStoreRequest
- CandidateUpdateRequest  
  入力バリデーションと責務分離のため必須。

### Policy
- CandidatePolicy  
  閲覧・編集・非表示の権限制御を UI 非依存で行う。

---

## 他機能との関係
- 応募（Application）は候補者に紐づく
- パイプライン・評価・分析は候補者を起点に参照される
- ダッシュボードでは、候補者単位で滞留・未対応を把握する

---

## 本機能で「やらないこと」
以下は、Opinio ATS の思想に基づく設計判断である。

- 候補者の優劣や評価の自動算出
- 候補者のランク付け
- 処遇判断につながる確定情報の保持

候補者管理はあくまで **判断のための素材を整理・参照する基盤**であり、判断そのものを代替する機能ではない。
