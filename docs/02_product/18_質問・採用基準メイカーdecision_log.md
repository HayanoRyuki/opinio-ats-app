# 採用判断ログ（Decision Log）

本ドキュメントは、Opinio ATS における  
**機能定義：採用判断ログ（Decision Log）** を扱う。

---

## 機能の位置づけ
採用判断ログは、  
選考過程における **あらゆる判断とその理由を、構造化して記録・参照するための機能**である。

本機能は、
- 採用可否を自動で決めるためのものではない
- 判断を正当化するためのものでもない

あくまで、
**「なぜその判断に至ったのか」を後から説明できる状態を残す**
ことを目的とする。

---

## 背景と課題
採用判断は、往々にして以下の問題を抱える。

- 判断理由が口頭・記憶に依存する
- 面接官ごとに基準の解釈が異なる
- 時間が経つと判断の根拠が失われる
- 採用の振り返りが属人化する

Decision Log は、  
これらを **組織の判断履歴として残すための仕組み**である。

---

## 基本思想（最重要）
- 判断と評価を混同しない
- 判断は「事実」と「解釈」を分けて記録する
- 正解・不正解を決めない
- 後知恵バイアスを防ぐ

---

## 記録対象となる判断
以下は代表例であり、固定しない。

- 書類通過／不通過判断
- 次ステップへ進める判断
- 内定判断
- 見送り判断
- 保留判断

---

## 判断ログの構造

### 記録単位
- 応募（Application）単位で紐づく
- ステップ移動と必ずしも一致しない
- 複数回の判断を時系列で保持する

---

### 記録内容（例）
- 判断日時
- 判断者
- 判断種別（通過 / 見送り / 保留 等）
- 判断理由（自由記述）
- 参照した評価観点
- 判断時点のステップ

---

## データモデル（必須）

### DecisionLog
- decision_log_id
- application_id
- decision_type  
  （pass / reject / hold / offer 等）
- decision_reason
- decided_by
- decided_at
- related_step_id（nullable）

---

### DecisionReference
- reference_id
- decision_log_id
- reference_type  
  （evaluation / memo / interview 等）
- reference_id_value
- created_at

---

## 操作フロー

### 記録タイミング
- 面接後
- ステップ移動時
- 内定・見送り確定時
- 振り返り時（追記）

---

### 入力の考え方
- 定型入力 + 自由記述を併用
- 「理由未入力」を許容するが、後から追記可能
- 判断を強制しない

---

## コントローラ設計

### DecisionLogController
- store  
  判断ログ作成
- index  
  応募単位の判断履歴一覧
- show  
  個別判断詳細

---

## Service

### DecisionLogService
- ログ生成ロジック
- 参照関係の整理
- ステップ・評価との関連付け

---

## 権限・制御
- 記録は権限保持者のみ
- 閲覧は関係者に限定
- 修正は追記方式（上書きしない）

---

## ログ・監査
- すべての判断操作を AuditLog に記録
- 削除不可
- 時系列で完全に追跡可能とする

---

## 他機能との関係
- 選考パイプライン：  
  判断の背景となる構造
- 評価観点・質問：  
  判断の根拠参照
- 分析・レポート：  
  判断傾向の振り返り
- ガバナンス：  
  採用プロセスの説明責任

---

## 本機能で「やらないこと」
- 判断の自動化
- AI による採否決定
- 点数化による正解提示
- 判断の強制

---

## 一文定義（迷ったとき用）
採用判断ログは、  
**採用における「なぜそう決めたか」を、組織の記憶として残すための機能である。**

---

## SoT（Single Source of Truth）との関係（最重要）

採用判断ログ（Decision Log）は、  
**SoT（Single Source of Truth）に含まれるが、  
「事実」ではなく「意思決定の記録」として扱われる**。

---

### Decision Log の SoT 上の位置づけ
Decision Log が保持するのは、

- 判断が行われたという事実
- その時点での判断内容
- 判断者と判断理由

であり、  
**判断そのものの正否や妥当性を確定するものではない。**

Decision Log は、
- 評価（Evaluation）
- 進行状態（Pipeline）
- 応募状態（Application）

とは異なる軸で存在する  
**「意思決定の履歴 SoT」**である。

---

### 他の SoT 要素との違い

| 要素 | SoTとしての性質 |
|---|---|
| Candidate / Application | 客観的事実の SoT |
| EvaluationScore | 評価行為の事実 SoT |
| DecisionLog | 判断が行われたという事実の SoT |
| Calibration / 分析 | SoT 非接触 |

Decision Log は  
**「判断が存在した」という事実を保持するが、  
判断内容を真実として固定するものではない。**

---

### 書き換え・修正に関する原則
- Decision Log は **上書きしない**
- 判断変更があった場合は **新たなログとして追記する**
- 過去判断を「なかったこと」にしない

これは、
**判断の変遷そのものが組織の学習資産である**
という前提に基づく。

---

### 評価・AI との明確な線引き
- Decision Log は AI によって自動生成されない
- AI は判断材料を提示することはできるが、  
  **判断ログの主体にはならない**
- Decision Log は  
  評価スコア・AI推定値の「結果」ではない

判断は常に  
**人間の意思決定として記録される。**

---

### 設計上の意図
Decision Log を SoT に含める理由は、
- 判断を正解として固定するためではなく
- 判断の背景・文脈・責任所在を  
  将来にわたって説明可能にするためである

Decision Log は、  
**「正解を残す仕組み」ではなく  
「説明責任を残す仕組み」**である。
